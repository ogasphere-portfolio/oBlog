<h1 id="oblog-eyes">oBlog üëÄ</h1>
<p>On va d√©marrer notre projet <strong>oBlog</strong>, sans avoir encore le rendu HTML/CSS.  <br />
Ce n'est pas grave, on peut commencer par anticiper la structure de notre projet =&gt; fichiers &amp; dossiers.</p>
<h2 id="code-fourni-palm_tree">Code fourni üå¥</h2>
<ul>
<li>une int√©gration HTML/CSS (qui n'en est pas vraiment une) est fournie</li>
<li>seule la page d'accueil est mise en place</li>
<li>la nav nous permettra de naviguer facilement entre nos pages</li>
</ul>
<h2 id="cr√©ons-les-fichiers-point-dentr√©e-hammer">Cr√©ons les fichiers "point d'entr√©e" üî®</h2>
<p>Un <strong>point d'entr√©e</strong> est un fichier qui sera acc√©d√© via une requ√™te HTTP effectu√©e par le navigateur.  <br />
<code>http://www.monsite.fr/</code>, le point d'entr√©e n'est pas stipul√©, mais c'est <code>index.php</code>  <br />
<code>http://www.monsite.fr/test.php</code>, le point d'entr√©e est <code>test.php</code> √† la racine du projet  <br />
<code>http://www.monsite.fr/dossier/article.php</code>, le point d'entr√©e est <code>article.php</code> dans le sous-dossier "dossier"</p>
<h3 id="etapes-computer">Etapes üíª</h3>
<ul>
<li>√† la racine, cr√©er les fichiers :</li>
<li><code>category.php</code> =&gt; page listant les articles d'une cat√©gorie</li>
<li><code>author.php</code> =&gt; page listant les articles d'un auteur</li>
<li><code>article.php</code> =&gt; page affichant un article</li>
<li>dans le dossier <code>inc/templates</code> :</li>
<li>cr√©er un fichier de templates par page</li>
<li>y √©crire le nom de la page (et un peu d'HTML si vous voulez üòâ)</li>
<li>dans chaque fichier √† la racine :</li>
<li>inclure toutes les classes utiles</li>
<li>afficher le code HTML gr√¢ce aux templates</li>
<li>v√©rifier l'affichage correct des 3 nouvelles pages</li>
</ul>
<h2 id="factorisation-hocho">Factorisation üî™</h2>
<p>En tant que d√©vs, on est fain√©ant. Et on voit bien que des bouts de code vont se r√©p√©ter dans chaque "point d'entr√©e".  <br />
On va donc, d√©sormais, n'utiliser qu'un seul et unique point d'entr√©e : <code>index.php</code></p>
<h3 id="1---distinguer-chaque-page-mag">#1 - Distinguer chaque page üîç</h3>
<ul>
<li>se baser sur un param√®tre d'URL : "page"</li>
<li><code>category.php</code> =&gt; <code>http://localhost/folder/subfolder/S04-E03-oBlog/index.php?page=category</code></li>
<li><code>author.php</code> =&gt; <code>http://localhost/folder/subfolder/S04-E03-oBlog/index.php?page=author</code></li>
<li><code>article.php</code> =&gt; <code>http://localhost/folder/subfolder/S04-E03-oBlog/index.php?page=article</code></li>
<li>r√©cup√©rer ce param√®tre en GET dans <code>index.php</code></li>
<li>si le param√®tre n'est pas fourni, c'est qu'on est sur la home</li>
<li>gr√¢ce √† des <code>if</code>, <code>else if</code> et <code>else</code>, afficher le nom de la page</li>
<li>le but est de v√©rifier qu'on arrive bien √† distinguer chaque page</li>
</ul>
<h3 id="2---g√©rer-laffichage-de-chaque-page-lipstick">#2 - G√©rer l'affichage de chaque page üíÑ</h3>
<ul>
<li>analyser les bouts de code <em>qui changent</em> dans les fichiers √† la racine</li>
<li>remplacer les cha√Ænes de caract√®res <em>qui changent</em> par une variable</li>
<li>coder l'affichage de toutes les pages dans <code>index.php</code></li>
<li><em>si la page demand√©e est l'accueil, alors je charge la template correspondante</em></li>
<li><em>sinon si la page demand√©e est la page cat√©gorie, alors je charge la template correspondante</em></li>
<li>etc.</li>
</ul>
<p><strong>On a r√©ussi √† factoriser, √† ne pas se r√©p√©ter</strong> üéâ</p>
<p>Donc on peut d√©sormais supprimer les fichiers <code>category.php</code>, <code>author.php</code> et <code>article.php</code>.</p>
<h2 id="r√©cup√©rer-les-donn√©es">R√©cup√©rer les donn√©es</h2>
<h3 id="1---page-daccueil">#1 - Page d'accueil</h3>
<ul>
<li>inclure le fichier de donn√©es <code>inc/data.php</code></li>
<li>r√©cup√©rer le tableau des articles</li>
<li>dans la template :</li>
<li>parcourir le tableau pour afficher titre et texte des articles</li>
<li>renseigner le lien vers la page de chaque article (ajouter l'id dans l'URL <code>?page=article&amp;id=45</code>)</li>
</ul>
<p><details><summary>Spoiler</summary></p>
<pre><code class="hljs php language-php"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-comment">// ...</span>

<span class="hljs-comment">// Inclusion du fichier contenant les donn√©es</span>
<span class="hljs-keyword">require</span> <span class="hljs-string">&#x27;inc/data.php&#x27;</span>;

<span class="hljs-comment">// ...</span>

<span class="hljs-comment">// R√©cup√©ration des articles</span>
<span class="hljs-variable">$articlesList</span> = <span class="hljs-variable">$dataArticlesList</span>;

<span class="hljs-comment">// Debug pour v√©rifier le contenu de la variable</span>
<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$articlesList</span>); <span class="hljs-keyword">exit</span>; <span class="hljs-comment">// √† commenter une fois v√©rifi√©</span>

<span class="hljs-comment">// ...</span>
</code></pre>
<p></details></p>
<h3 id="2---page-article">#2 - Page Article</h3>
<ul>
<li>inclure le fichier de donn√©es <code>inc/data.php</code></li>
<li>r√©cup√©rer l'id fourni en param√®tre de l'URL (<code>$_GET</code>)</li>
<li>r√©cup√©rer l'objet article pour l'id fourni</li>
<li>dans la template (√† cr√©er si besoin) :</li>
<li>afficher titre et texte de l'article</li>
</ul>
<p><details><summary>Spoiler</summary></p>
<pre><code class="hljs php language-php"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-comment">// ...</span>

<span class="hljs-comment">// Inclusion du fichier contenant les donn√©es</span>
<span class="hljs-keyword">require</span> <span class="hljs-string">&#x27;inc/data.php&#x27;</span>;

<span class="hljs-comment">// ...</span>

<span class="hljs-comment">// R√©cup√©ration des donn√©es de l&#x27;article #3</span>
<span class="hljs-variable">$articleData</span> = <span class="hljs-variable">$dataArticlesList</span>[<span class="hljs-number">3</span>];

<span class="hljs-comment">// Debug pour v√©rifier le contenu de la variable</span>
<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$articleData</span>); <span class="hljs-keyword">exit</span>; <span class="hljs-comment">// √† commenter une fois v√©rifi√©</span>

<span class="hljs-comment">// ...</span>
</code></pre>
<p></details></p>
<p><strong>On a r√©ussi √† dynamiser le contenu de notre site</strong> üéâ</p>